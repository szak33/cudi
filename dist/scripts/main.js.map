{"version":3,"sources":["main.js"],"names":["CANVAS","document","getElementById","CTX","getContext","box","cc","n","lvldone","pirate","Image","src","chest","palm","spot","dig","island","level1","x","y","chests","palms","spots","level2","level3","levels","draw","nextLevel","drawImage","width","height","i","length","j","k","_i","_j","checkWin","requestAnimationFrame","count","style","display","visibility","onclick","clearRect","collision","arr1","arr2","offsetx","offsety","val","p","moveLeft","moveRight","moveUp","moveDown","addEventListener","event","keyCode","preventDefault"],"mappings":"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","file":"main.js","sourcesContent":["(function(){\r\n// Preparing Canvas\r\nconst CANVAS = document.getElementById('canvas');\r\nconst CTX = CANVAS.getContext('2d');\r\n\r\n\r\nlet box = 32; // Box grid in px - 21x18 boxes on the map\r\nlet cc; //Current chest\r\nlet n = 0; // counter for levels\r\nlet lvldone = false; //Current game\r\n\r\n\r\n// Images & their sources\r\nlet pirate = new Image();\r\npirate.src = 'images/pirate.png';\r\nlet chest = new Image(32, 32);\r\nchest.src = 'images/chest.png';\r\nlet palm = new Image(32, 32);\r\npalm.src = 'images/palm-tree.png';\r\nlet spot = new Image(32, 32);\r\nspot.src = 'images/spot.png';\r\nlet dig = new Image();\r\ndig.src = 'images/dig.png';\r\nlet island = new Image();\r\nisland.src = 'images/island.png';\r\n\r\n\r\n\r\n// GAME LEVELS\r\nlet level1 = {\r\n  // Character and terrain coordinates\r\n    pirate : {x:12,y:12},\r\n    chests : [ {x:12,y:10},{x:12,y:11} ],\r\n    palms : [ {x:8,y:8},{x:9,y:8},{x:10,y:8},{x:11,y:8},{x:6,y:9},{x:7,y:9},{x:8,y:9},{x:11,y:9},{x:12,y:9},{x:13,y:9},{x:14,y:9},{x:6,y:10},{x:14,y:10},{x:6,y:11},{x:8,y:11},{x:11,y:11},{x:14,y:11},{x:6,y:12},{x:11,y:12},{x:14,y:12},{x:6,y:13},{x:7,y:13},{x:8,y:13},{x:9,y:13},{x:10,y:13},{x:11,y:13},{x:12,y:13},{x:13,y:13},{x:14,y:13} ],\r\n    spots : [ {x:8,y:12},{x:10,y:12} ]\r\n  };\r\n\r\nlet level2 = {\r\n    pirate : {x:7,y:7},\r\n    chests : [ {x:8,y:9},{x:8,y:10},{x:9,y:10} ],\r\n    palms : [ {x:6,y:6},{x:7,y:6},{x:8,y:6},{x:9,y:6},{x:10,y:6},{x:6,y:7},{x:6,y:8},{x:6,y:9},{x:6,y:10},{x:6,y:11},{x:7,y:11},{x:8,y:11},{x:7,y:12},{x:8,y:12},{x:7,y:13},{x:7,y:14},{x:7,y:15},{x:8,y:15},{x:9,y:15},{x:10,y:15},{x:11,y:15},{x:11,y:12},{x:11,y:13},{x:11,y:14},{x:12,y:13},{x:13,y:13},{x:14,y:13},{x:14,y:8},{x:14,y:9},{x:14,y:10},{x:14,y:11},{x:14,y:12},{x:12,y:8},{x:13,y:8},{x:14,y:9},{x:12,y:9},{x:12,y:10},{x:10,y:10},{x:11,y:10},{x:10,y:7},{x:10,y:8},{x:10,y:9} ],\r\n    spots : [ {x:13,y:9},{x:13,y:10},{x:13,y:11} ]\r\n  };\r\n\r\nlet level3 = {\r\n  // Character and terrain coordinates\r\n    pirate : {x:11,y:11},\r\n    chests : [ {x:10,y:10},{x:12,y:10},{x:10,y:11},{x:11,y:12} ],\r\n    palms : [ {x:9,y:7},{x:10,y:7},{x:11,y:7},{x:9,y:8},{x:11,y:8},{x:9,y:9},{x:11,y:9},{x:12,y:9},{x:13,y:9},{x:14,y:9},{x:7,y:10},{x:8,y:10},{x:9,y:10},{x:14,y:10},{x:7,y:11},{x:12,y:11},{x:13,y:11},{x:14,y:11},{x:7,y:12},{x:8,y:12},{x:9,y:12},{x:10,y:12},{x:12,y:12},{x:10,y:14},{x:10,y:13},{x:12,y:13},{x:11,y:14},{x:12,y:14} ],\r\n    spots : [ {x:10,y:8},{x:8,y:11},{x:13,y:10},{x:11,y:13} ]\r\n  };\r\n\r\nlet levels = [level1, level2, level3];\r\n\r\nfunction draw() {\r\n\r\n  if (lvldone) {\r\n    nextLevel();\r\n    return;\r\n  }\r\n\r\n  //Drawing static island image\r\n  CTX.drawImage(island, 0, 0, island.width, island.height);\r\n\r\n  //Drawing palms as the level's bounds\r\n  for (var i = 0; i < levels[n].palms.length; i++) {\r\n    CTX.drawImage(palm, levels[n].palms[i].x * box, levels[n].palms[i].y * box);\r\n  }\r\n\r\n  //Drawing X spots\r\n  for (var j = 0; j < levels[n].spots.length; j++) {\r\n    CTX.drawImage(spot, levels[n].spots[j].x * box, levels[n].spots[j].y * box);\r\n  }\r\n  //Drawing chests\r\n  for (var k = 0; k < levels[n].chests.length; k++) {\r\n    CTX.drawImage(chest, levels[n].chests[k].x * box, levels[n].chests[k].y * box);\r\n  }\r\n\r\n  for (var _i = 0; _i < levels[n].chests.length; _i++) {\r\n    for (var _j = 0; _j < levels[n].spots.length; _j++) {\r\n      if (levels[n].chests[_i].x === levels[n].spots[_j].x && levels[n].chests[_i].y === levels[n].spots[_j].y) {\r\n        CTX.drawImage(dig, levels[n].spots[_j].x * box, levels[n].spots[_j].y * box);\r\n      }\r\n    }\r\n  }\r\n\r\n  //Drawing pirate character, slicing from sprite\r\n  CTX.drawImage(pirate, 0, 0, 32, 32, levels[n].pirate.x * box, levels[n].pirate.y * box, 32, 32);\r\n\r\n  checkWin();\r\n  requestAnimationFrame(draw);\r\n\r\n}\r\n\r\nfunction checkWin() {\r\n  let count = 0;\r\n  for(let i = 0; i < levels[n].chests.length; i++) {\r\n    for(let j = 0; j < levels[n].spots.length; j++) {\r\n      if(levels[n].chests[i].x === levels[n].spots[j].x && levels[n].chests[i].y === levels[n].spots[j].y){\r\n        count++;\r\n      }\r\n    }\r\n    if(count === levels[n].chests.length){\r\n      lvldone = true;\r\n      CANVAS.style.display = 'none';\r\n      document.getElementById('won').style.visibility = 'visible';\r\n      n++;\r\n      return;\r\n    }\r\n  }\r\n}\r\n\r\nfunction nextLevel() {\r\n\r\n  document.getElementById('nxt').onclick = function() {\r\n    lvldone = false;\r\n    CANVAS.style.display = 'block';\r\n    CTX.clearRect(0, 0, 672, 672);\r\n    draw();\r\n    return;\r\n  }\r\n}\r\n\r\n// A helper function to determine if something's in the way\r\nfunction collision(arr1, arr2, offsetx, offsety) {\r\n    for(let i = 0; i < arr2.length; i++){\r\n          if(arr1.x + offsetx === arr2[i].x && arr1.y + offsety === arr2[i].y){\r\n              return { val : true, p : i}\r\n          }\r\n      }\r\n      return { val : false, p : null}\r\n}\r\n\r\nfunction moveLeft() {\r\n    cc = collision(levels[n].pirate, levels[n].chests, -1, 0);\r\n\r\n    if(collision(levels[n].pirate, levels[n].palms, -1, 0).val === false) {\r\n      if(collision(levels[n].pirate, levels[n].chests, -1, 0).val === true) {\r\n        if(collision(levels[n].chests[cc.p], levels[n].palms, -1, 0).val === false) {\r\n          if(collision(levels[n].chests[cc.p], levels[n].chests, -1, 0).val === false) {\r\n\r\n      levels[n].chests[cc.p].x--;\r\n      levels[n].pirate.x--;\r\n      draw();\r\n      }\r\n    }\r\n  } else {\r\n      levels[n].pirate.x--;\r\n      draw();\r\n    }\r\n}\r\n}\r\n\r\nfunction moveRight() {\r\n    cc = collision(levels[n].pirate, levels[n].chests, 1, 0);\r\n\r\n    if(collision(levels[n].pirate, levels[n].palms, 1, 0).val === false) {\r\n      if(collision(levels[n].pirate, levels[n].chests, 1, 0).val === true) {\r\n        if(collision(levels[n].chests[cc.p], levels[n].palms, 1, 0).val === false) {\r\n          if(collision(levels[n].chests[cc.p], levels[n].chests, 1, 0).val === false) {\r\n\r\n      levels[n].pirate.x++;\r\n      levels[n].chests[cc.p].x++;\r\n      draw();\r\n      }\r\n    }\r\n  } else {\r\n      levels[n].pirate.x++;\r\n      draw();\r\n    }\r\n}\r\n}\r\n\r\nfunction moveUp() {\r\n    cc = collision(levels[n].pirate, levels[n].chests, 0, -1);\r\n\r\n    if(collision(levels[n].pirate, levels[n].palms, 0, -1).val === false) {\r\n      if(collision(levels[n].pirate, levels[n].chests, 0, -1).val === true) {\r\n            if(collision(levels[n].chests[cc.p], levels[n].palms, 0, -1).val === false) {\r\n              if(collision(levels[n].chests[cc.p], levels[n].chests, 0, -1).val === false) {\r\n                levels[n].pirate.y--;\r\n                levels[n].chests[cc.p].y--;\r\n                draw();\r\n                }\r\n              }\r\n    } else {\r\n      levels[n].pirate.y--;\r\n      draw();\r\n    }\r\n}\r\n}\r\n\r\nfunction moveDown() {\r\n  cc = collision(levels[n].pirate, levels[n].chests, 0, 1);\r\n\r\n  if(collision(levels[n].pirate, levels[n].palms, 0, 1).val === false) {\r\n    if(collision(levels[n].pirate, levels[n].chests, 0, 1).val === true) {\r\n          if(collision(levels[n].chests[cc.p], levels[n].palms, 0, 1).val === false) {\r\n            if(collision(levels[n].chests[cc.p], levels[n].chests, 0, 1).val === false) {\r\n\r\n      levels[n].chests[cc.p].y++;\r\n      levels[n].pirate.y++;\r\n      draw();\r\n      }\r\n    }\r\n  } else {\r\n      levels[n].pirate.y++;\r\n      draw();\r\n    }\r\n}\r\n}\r\n\r\ndocument.addEventListener('keydown', function(event) {\r\n  if(event.keyCode >= 37 && event.keyCode <= 40) {\r\n      event.preventDefault();\r\n\r\n      if(event.keyCode === 37) {\r\n        moveLeft();\r\n      } else if (event.keyCode === 38) {\r\n        moveUp();\r\n      } else if (event.keyCode === 39) {\r\n        moveRight();\r\n      } else if (event.keyCode === 40) {\r\n        moveDown();\r\n      }\r\n\r\n  }\r\n});\r\n// Let the fun begin\r\ndraw();\r\n})();\r\n"]}