{"version":3,"sources":["main.js"],"names":["canvas","document","getElementById","ctx","getContext","box","cc","n","pirate","Image","src","chest","palm","spot","dig","island","level","piratePos","x","y","chestPos","palmPos","spotPos","GAME","lvl","curr_game","chests","palms","spots","draw","drawImage","width","height","i","length","j","k","requestAnimationFrame","lvldone","digg","style","display","visibility","moving","collision","arr1","arr2","offsetx","offsety","val","p","moveLeft","moveRight","moveUp","moveDown","addEventListener","event","keyCode","preventDefault"],"mappings":";;AAAA,CAAC,YAAW;;AAEZ;AACA,MAAMA,SAASC,SAASC,cAAT,CAAwB,QAAxB,CAAf;AACA,MAAMC,MAAMH,OAAOI,UAAP,CAAkB,IAAlB,CAAZ;;AAGA,MAAIC,MAAM,EAAV,CAPY,CAOE;AACd,MAAIC,WAAJ,CARY,CAQJ;AACR,MAAIC,IAAI,CAAR,CATY,CASD;;;AAGX;AACA,MAAIC,SAAS,IAAIC,KAAJ,EAAb;AACAD,SAAOE,GAAP,GAAa,mBAAb;AACA,MAAIC,QAAQ,IAAIF,KAAJ,CAAU,EAAV,EAAc,EAAd,CAAZ;AACAE,QAAMD,GAAN,GAAY,kBAAZ;AACA,MAAIE,OAAO,IAAIH,KAAJ,CAAU,EAAV,EAAc,EAAd,CAAX;AACAG,OAAKF,GAAL,GAAW,sBAAX;AACA,MAAIG,OAAO,IAAIJ,KAAJ,CAAU,EAAV,EAAc,EAAd,CAAX;AACAI,OAAKH,GAAL,GAAW,iBAAX;AACA,MAAII,MAAM,IAAIL,KAAJ,EAAV;AACAK,MAAIJ,GAAJ,GAAU,gBAAV;AACA,MAAIK,SAAS,IAAIN,KAAJ,EAAb;AACAM,SAAOL,GAAP,GAAa,mBAAb;;AAIA;AACA,MAAIM,QAAQ;AACZ;AACEC,eAAY,EAACC,GAAE,EAAH,EAAMC,GAAE,EAAR,EAFF;AAGVC,cAAW,CAAE,EAACF,GAAE,EAAH,EAAMC,GAAE,EAAR,EAAF,EAAc,EAACD,GAAE,EAAH,EAAMC,GAAE,EAAR,EAAd,CAHD;AAIVE,aAAU,CAAE,EAACH,GAAE,CAAH,EAAKC,GAAE,CAAP,EAAF,EAAY,EAACD,GAAE,CAAH,EAAKC,GAAE,CAAP,EAAZ,EAAsB,EAACD,GAAE,EAAH,EAAMC,GAAE,CAAR,EAAtB,EAAiC,EAACD,GAAE,EAAH,EAAMC,GAAE,CAAR,EAAjC,EAA4C,EAACD,GAAE,CAAH,EAAKC,GAAE,CAAP,EAA5C,EAAsD,EAACD,GAAE,CAAH,EAAKC,GAAE,CAAP,EAAtD,EAAgE,EAACD,GAAE,CAAH,EAAKC,GAAE,CAAP,EAAhE,EAA0E,EAACD,GAAE,EAAH,EAAMC,GAAE,CAAR,EAA1E,EAAqF,EAACD,GAAE,EAAH,EAAMC,GAAE,CAAR,EAArF,EAAgG,EAACD,GAAE,EAAH,EAAMC,GAAE,CAAR,EAAhG,EAA2G,EAACD,GAAE,EAAH,EAAMC,GAAE,CAAR,EAA3G,EAAsH,EAACD,GAAE,CAAH,EAAKC,GAAE,EAAP,EAAtH,EAAiI,EAACD,GAAE,EAAH,EAAMC,GAAE,EAAR,EAAjI,EAA6I,EAACD,GAAE,CAAH,EAAKC,GAAE,EAAP,EAA7I,EAAwJ,EAACD,GAAE,CAAH,EAAKC,GAAE,EAAP,EAAxJ,EAAmK,EAACD,GAAE,EAAH,EAAMC,GAAE,EAAR,EAAnK,EAA+K,EAACD,GAAE,EAAH,EAAMC,GAAE,EAAR,EAA/K,EAA2L,EAACD,GAAE,CAAH,EAAKC,GAAE,EAAP,EAA3L,EAAsM,EAACD,GAAE,EAAH,EAAMC,GAAE,EAAR,EAAtM,EAAkN,EAACD,GAAE,EAAH,EAAMC,GAAE,EAAR,EAAlN,EAA8N,EAACD,GAAE,CAAH,EAAKC,GAAE,EAAP,EAA9N,EAAyO,EAACD,GAAE,CAAH,EAAKC,GAAE,EAAP,EAAzO,EAAoP,EAACD,GAAE,CAAH,EAAKC,GAAE,EAAP,EAApP,EAA+P,EAACD,GAAE,CAAH,EAAKC,GAAE,EAAP,EAA/P,EAA0Q,EAACD,GAAE,EAAH,EAAMC,GAAE,EAAR,EAA1Q,EAAsR,EAACD,GAAE,EAAH,EAAMC,GAAE,EAAR,EAAtR,EAAkS,EAACD,GAAE,EAAH,EAAMC,GAAE,EAAR,EAAlS,EAA8S,EAACD,GAAE,EAAH,EAAMC,GAAE,EAAR,EAA9S,EAA0T,EAACD,GAAE,EAAH,EAAMC,GAAE,EAAR,EAA1T,CAJA;AAKVG,aAAU,CAAE,EAACJ,GAAE,CAAH,EAAKC,GAAE,EAAP,EAAF,EAAa,EAACD,GAAE,EAAH,EAAMC,GAAE,EAAR,EAAb;AALA,GAAZ;;AASA,MAAII,OAAO,SAAPA,IAAO,CAASC,GAAT,EAAc;AACvB,QAAIC,YAAY;AACZjB,cAASgB,IAAIP,SADD;AAEZS,cAASF,IAAIJ,QAFD;AAGZO,aAAQH,IAAIH,OAHA;AAIZO,aAAQJ,IAAIF,OAJA;;AAMZ;AACAO,YAAO,gBAAW;AAChB;AACA1B,YAAI2B,SAAJ,CAAcf,MAAd,EAAsB,CAAtB,EAAyB,CAAzB,EAA4BA,OAAOgB,KAAnC,EAA0ChB,OAAOiB,MAAjD;;AAEA;AACA,aAAI,IAAIC,IAAI,CAAZ,EAAeA,IAAIR,UAAUE,KAAV,CAAgBO,MAAnC,EAA2CD,GAA3C,EAAgD;AAC9C9B,cAAI2B,SAAJ,CAAclB,IAAd,EAAoBa,UAAUE,KAAV,CAAgBM,CAAhB,EAAmBf,CAAnB,GAAuBb,GAA3C,EAAgDoB,UAAUE,KAAV,CAAgBM,CAAhB,EAAmBd,CAAnB,GAAuBd,GAAvE;AACD;;AAED;AACA,aAAI,IAAI8B,IAAI,CAAZ,EAAeA,IAAIV,UAAUG,KAAV,CAAgBM,MAAnC,EAA2CC,GAA3C,EAAgD;AAC9ChC,cAAI2B,SAAJ,CAAcjB,IAAd,EAAoBY,UAAUG,KAAV,CAAgBO,CAAhB,EAAmBjB,CAAnB,GAAuBb,GAA3C,EAAgDoB,UAAUG,KAAV,CAAgBO,CAAhB,EAAmBhB,CAAnB,GAAuBd,GAAvE;AACD;AACD;AACA,aAAI,IAAI+B,IAAI,CAAZ,EAAeA,IAAIX,UAAUC,MAAV,CAAiBQ,MAApC,EAA4CE,GAA5C,EAAiD;AAC/CjC,cAAI2B,SAAJ,CAAcnB,KAAd,EAAqBc,UAAUC,MAAV,CAAiBU,CAAjB,EAAoBlB,CAApB,GAAwBb,GAA7C,EAAkDoB,UAAUC,MAAV,CAAiBU,CAAjB,EAAoBjB,CAApB,GAAwBd,GAA1E;AACD;;AAED,aAAI,IAAI4B,KAAI,CAAZ,EAAeA,KAAIR,UAAUC,MAAV,CAAiBQ,MAApC,EAA4CD,IAA5C,EAAiD;AAC/C,eAAI,IAAIE,KAAI,CAAZ,EAAeA,KAAIV,UAAUG,KAAV,CAAgBM,MAAnC,EAA2CC,IAA3C,EAAgD;AAC9C,gBAAGV,UAAUC,MAAV,CAAiBO,EAAjB,EAAoBf,CAApB,KAA0BO,UAAUG,KAAV,CAAgBO,EAAhB,EAAmBjB,CAA7C,IAAkDO,UAAUC,MAAV,CAAiBO,EAAjB,EAAoBd,CAApB,KAA0BM,UAAUG,KAAV,CAAgBO,EAAhB,EAAmBhB,CAAlG,EAAoG;AAClGhB,kBAAI2B,SAAJ,CAAchB,GAAd,EAAmBW,UAAUG,KAAV,CAAgBO,EAAhB,EAAmBjB,CAAnB,GAAuBb,GAA1C,EAA+CoB,UAAUG,KAAV,CAAgBO,EAAhB,EAAmBhB,CAAnB,GAAuBd,GAAtE;AACD;AACF;AACF;;AAED;AACAF,YAAI2B,SAAJ,CAActB,MAAd,EAAsB,CAAtB,EAAyB,CAAzB,EAA4B,EAA5B,EAAgC,EAAhC,EAAoCiB,UAAUjB,MAAV,CAAiBU,CAAjB,GAAqBb,GAAzD,EAA8DoB,UAAUjB,MAAV,CAAiBW,CAAjB,GAAqBd,GAAnF,EAAwF,EAAxF,EAA4F,EAA5F;;AAEAgC,8BAAsBZ,UAAUI,IAAhC;AACD,OArCW;;AAuCZS,eAAU,mBAAU;AAClB,YAAIxB,MAAM,IAAV;AACA,aAAI,IAAImB,IAAI,CAAZ,EAAeA,IAAIR,UAAUC,MAAV,CAAiBQ,MAApC,EAA4CD,GAA5C,EAAiD;AAC/C,cAAIM,OAAO,KAAX;AACA,eAAI,IAAIJ,IAAI,CAAZ,EAAeA,IAAIV,UAAUG,KAAV,CAAgBM,MAAnC,EAA2CC,GAA3C,EAAgD;AAC9C,gBAAGV,UAAUC,MAAV,CAAiBO,CAAjB,EAAoBf,CAApB,KAA0BO,UAAUG,KAAV,CAAgBO,CAAhB,EAAmBjB,CAA7C,IAAkDO,UAAUC,MAAV,CAAiBO,CAAjB,EAAoBd,CAApB,KAA0BM,UAAUG,KAAV,CAAgBO,CAAhB,EAAmBhB,CAAlG,EAAoG;AAClGoB,qBAAO,IAAP;AACD;AACF;AACDzB,gBAAMA,OAAOyB,IAAb;AACD;AACD,YAAGzB,GAAH,EAAO;AACL;AACAd,iBAAOwC,KAAP,CAAaC,OAAb,GAAuB,MAAvB;AACAxC,mBAASC,cAAT,CAAwB,KAAxB,EAA+BsC,KAA/B,CAAqCE,UAArC,GAAkD,SAAlD;AACD;AACF,OAvDW;;AAyDZC,cAAS,kBAAW;;AAEpB;AACA,iBAASC,SAAT,CAAmBC,IAAnB,EAAyBC,IAAzB,EAA+BC,OAA/B,EAAwCC,OAAxC,EAAiD;AAC7C,eAAI,IAAIf,IAAI,CAAZ,EAAeA,IAAIa,KAAKZ,MAAxB,EAAgCD,GAAhC,EAAoC;AAC9B,gBAAGY,KAAK3B,CAAL,GAAS6B,OAAT,KAAqBD,KAAKb,CAAL,EAAQf,CAA7B,IAAkC2B,KAAK1B,CAAL,GAAS6B,OAAT,KAAqBF,KAAKb,CAAL,EAAQd,CAAlE,EAAoE;AAChE,qBAAO,EAAE8B,KAAM,IAAR,EAAcC,GAAIjB,CAAlB,EAAP;AACH;AACJ;AACD,iBAAO,EAAEgB,KAAM,KAAR,EAAeC,GAAI,IAAnB,EAAP;AACL;;AAED,iBAASC,QAAT,GAAoB;AAChB7C,eAAKsC,UAAUnB,UAAUjB,MAApB,EAA4BiB,UAAUC,MAAtC,EAA8C,CAAC,CAA/C,EAAkD,CAAlD,CAAL;;AAEA,cAAGkB,UAAUnB,UAAUjB,MAApB,EAA4BiB,UAAUE,KAAtC,EAA6C,CAAC,CAA9C,EAAiD,CAAjD,EAAoDsB,GAApD,KAA4D,KAA/D,EAAsE;AACpE,gBAAGL,UAAUnB,UAAUjB,MAApB,EAA4BiB,UAAUC,MAAtC,EAA8C,CAAC,CAA/C,EAAkD,CAAlD,EAAqDuB,GAArD,KAA6D,IAAhE,EAAsE;AACpE,kBAAGL,UAAUnB,UAAUC,MAAV,CAAiBpB,GAAG4C,CAApB,CAAV,EAAkCzB,UAAUE,KAA5C,EAAmD,CAAC,CAApD,EAAuD,CAAvD,EAA0DsB,GAA1D,KAAkE,KAArE,EAA4E;AAC1E,oBAAGL,UAAUnB,UAAUC,MAAV,CAAiBpB,GAAG4C,CAApB,CAAV,EAAkCzB,UAAUC,MAA5C,EAAoD,CAAC,CAArD,EAAwD,CAAxD,EAA2DuB,GAA3D,KAAmE,KAAtE,EAA6E;;AAEjFxB,4BAAUC,MAAV,CAAiBpB,GAAG4C,CAApB,EAAuBhC,CAAvB;AACAO,4BAAUjB,MAAV,CAAiBU,CAAjB;AACAO,4BAAUI,IAAV;AACC;AACF;AACF,aATG,MASG;AACHJ,wBAAUjB,MAAV,CAAiBU,CAAjB;AACAO,wBAAUI,IAAV;AACD;AACJ;AACF;;AAEC,iBAASuB,SAAT,GAAqB;AACjB9C,eAAKsC,UAAUnB,UAAUjB,MAApB,EAA4BiB,UAAUC,MAAtC,EAA8C,CAA9C,EAAiD,CAAjD,CAAL;;AAEA,cAAGkB,UAAUnB,UAAUjB,MAApB,EAA4BiB,UAAUE,KAAtC,EAA6C,CAA7C,EAAgD,CAAhD,EAAmDsB,GAAnD,KAA2D,KAA9D,EAAqE;AACnE,gBAAGL,UAAUnB,UAAUjB,MAApB,EAA4BiB,UAAUC,MAAtC,EAA8C,CAA9C,EAAiD,CAAjD,EAAoDuB,GAApD,KAA4D,IAA/D,EAAqE;AACnE,kBAAGL,UAAUnB,UAAUC,MAAV,CAAiBpB,GAAG4C,CAApB,CAAV,EAAkCzB,UAAUE,KAA5C,EAAmD,CAAnD,EAAsD,CAAtD,EAAyDsB,GAAzD,KAAiE,KAApE,EAA2E;AACzE,oBAAGL,UAAUnB,UAAUC,MAAV,CAAiBpB,GAAG4C,CAApB,CAAV,EAAkCzB,UAAUC,MAA5C,EAAoD,CAApD,EAAuD,CAAvD,EAA0DuB,GAA1D,KAAkE,KAArE,EAA4E;;AAEhFxB,4BAAUjB,MAAV,CAAiBU,CAAjB;AACAO,4BAAUC,MAAV,CAAiBpB,GAAG4C,CAApB,EAAuBhC,CAAvB;AACAO,4BAAUI,IAAV;AACC;AACF;AACF,aATG,MASG;AACHJ,wBAAUjB,MAAV,CAAiBU,CAAjB;AACAO,wBAAUI,IAAV;AACD;AACJ;AACF;;AAEC,iBAASwB,MAAT,GAAkB;AACd/C,eAAKsC,UAAUnB,UAAUjB,MAApB,EAA4BiB,UAAUC,MAAtC,EAA8C,CAA9C,EAAiD,CAAC,CAAlD,CAAL;;AAEA,cAAGkB,UAAUnB,UAAUjB,MAApB,EAA4BiB,UAAUE,KAAtC,EAA6C,CAA7C,EAAgD,CAAC,CAAjD,EAAoDsB,GAApD,KAA4D,KAA/D,EAAsE;AACpE,gBAAGL,UAAUnB,UAAUjB,MAApB,EAA4BiB,UAAUC,MAAtC,EAA8C,CAA9C,EAAiD,CAAC,CAAlD,EAAqDuB,GAArD,KAA6D,IAAhE,EAAsE;AAChE,kBAAGL,UAAUnB,UAAUC,MAAV,CAAiBpB,GAAG4C,CAApB,CAAV,EAAkCzB,UAAUE,KAA5C,EAAmD,CAAnD,EAAsD,CAAC,CAAvD,EAA0DsB,GAA1D,KAAkE,KAArE,EAA4E;AAC1E,oBAAGL,UAAUnB,UAAUC,MAAV,CAAiBpB,GAAG4C,CAApB,CAAV,EAAkCzB,UAAUC,MAA5C,EAAoD,CAApD,EAAuD,CAAC,CAAxD,EAA2DuB,GAA3D,KAAmE,KAAtE,EAA6E;AAC3ExB,4BAAUjB,MAAV,CAAiBW,CAAjB;AACAM,4BAAUC,MAAV,CAAiBpB,GAAG4C,CAApB,EAAuB/B,CAAvB;AACAM,4BAAUI,IAAV;AACC;AACF;AACV,aARC,MAQK;AACLJ,wBAAUjB,MAAV,CAAiBW,CAAjB;AACAM,wBAAUI,IAAV;AACD;AACJ;AACF;;AAEC,iBAASyB,QAAT,GAAoB;AAClBhD,eAAKsC,UAAUnB,UAAUjB,MAApB,EAA4BiB,UAAUC,MAAtC,EAA8C,CAA9C,EAAiD,CAAjD,CAAL;;AAEA,cAAGkB,UAAUnB,UAAUjB,MAApB,EAA4BiB,UAAUE,KAAtC,EAA6C,CAA7C,EAAgD,CAAhD,EAAmDsB,GAAnD,KAA2D,KAA9D,EAAqE;AACnE,gBAAGL,UAAUnB,UAAUjB,MAApB,EAA4BiB,UAAUC,MAAtC,EAA8C,CAA9C,EAAiD,CAAjD,EAAoDuB,GAApD,KAA4D,IAA/D,EAAqE;AAC/D,kBAAGL,UAAUnB,UAAUC,MAAV,CAAiBpB,GAAG4C,CAApB,CAAV,EAAkCzB,UAAUE,KAA5C,EAAmD,CAAnD,EAAsD,CAAtD,EAAyDsB,GAAzD,KAAiE,KAApE,EAA2E;AACzE,oBAAGL,UAAUnB,UAAUC,MAAV,CAAiBpB,GAAG4C,CAApB,CAAV,EAAkCzB,UAAUC,MAA5C,EAAoD,CAApD,EAAuD,CAAvD,EAA0DuB,GAA1D,KAAkE,KAArE,EAA4E;;AAElFxB,4BAAUC,MAAV,CAAiBpB,GAAG4C,CAApB,EAAuB/B,CAAvB;AACAM,4BAAUjB,MAAV,CAAiBW,CAAjB;AACAM,4BAAUI,IAAV;AACC;AACF;AACF,aATC,MASK;AACHJ,wBAAUjB,MAAV,CAAiBW,CAAjB;AACAM,wBAAUI,IAAV;AACD;AACJ;AACF;;AAEC5B,iBAASsD,gBAAT,CAA0B,SAA1B,EAAqC,UAASC,KAAT,EAAgB;AACnD,cAAGA,MAAMC,OAAN,IAAiB,EAAjB,IAAuBD,MAAMC,OAAN,IAAiB,EAA3C,EAA+C;AAC3CD,kBAAME,cAAN;;AAEA,gBAAGF,MAAMC,OAAN,KAAkB,EAArB,EAAyB;AACvBN;AACD,aAFD,MAEO,IAAIK,MAAMC,OAAN,KAAkB,EAAtB,EAA0B;AAC/BJ;AACD,aAFM,MAEA,IAAIG,MAAMC,OAAN,KAAkB,EAAtB,EAA0B;AAC/BL;AACD,aAFM,MAEA,IAAII,MAAMC,OAAN,KAAkB,EAAtB,EAA0B;AAC/BH;AACD;AAEJ;;AAED7B,oBAAUa,OAAV;AACD,SAjBD;AAmBD,OAvKa,CAuKZ;;AAEF;;AAzKc,KAAhB,CA2KAb,UAAUI,IAAV;AACAJ,cAAUkB,MAAV;AAID,GAjLD,CAtCY,CAuNV;;;AAGFpB,OAAKP,KAAL;AAEC,CA5ND,I,CA4NM","file":"main.js","sourcesContent":["(function() {\r\n\r\n// Canvas\r\nconst canvas = document.getElementById(\"canvas\");\r\nconst ctx = canvas.getContext(\"2d\");\r\n\r\n\r\nlet box = 32; // Box grid in px - 21x18 boxes on the map\r\nlet cc; //Current chest\r\nlet n = 0; //Level 1\r\n\r\n\r\n// Images & sources\r\nlet pirate = new Image();\r\npirate.src = 'images/pirate.png';\r\nlet chest = new Image(32, 32);\r\nchest.src = 'images/chest.png';\r\nlet palm = new Image(32, 32);\r\npalm.src = 'images/palm-tree.png';\r\nlet spot = new Image(32, 32);\r\nspot.src = 'images/spot.png';\r\nlet dig = new Image();\r\ndig.src = 'images/dig.png';\r\nlet island = new Image();\r\nisland.src = 'images/island.png';\r\n\r\n\r\n\r\n// GAME LEVELS\r\nlet level = {\r\n// Character and terrain coordinates\r\n  piratePos : {x:12,y:12},\r\n  chestPos : [ {x:12,y:10},{x:12,y:11} ],\r\n  palmPos : [ {x:8,y:8},{x:9,y:8},{x:10,y:8},{x:11,y:8},{x:6,y:9},{x:7,y:9},{x:8,y:9},{x:11,y:9},{x:12,y:9},{x:13,y:9},{x:14,y:9},{x:6,y:10},{x:14,y:10},{x:6,y:11},{x:8,y:11},{x:11,y:11},{x:14,y:11},{x:6,y:12},{x:11,y:12},{x:14,y:12},{x:6,y:13},{x:7,y:13},{x:8,y:13},{x:9,y:13},{x:10,y:13},{x:11,y:13},{x:12,y:13},{x:13,y:13},{x:14,y:13} ],\r\n  spotPos : [ {x:8,y:12},{x:10,y:12} ]\r\n}\r\n\r\n\r\nlet GAME = function(lvl) {\r\n  let curr_game = {\r\n      pirate : lvl.piratePos,\r\n      chests : lvl.chestPos,\r\n      palms : lvl.palmPos,\r\n      spots : lvl.spotPos,\r\n\r\n      //Drawing images to canvas\r\n      draw : function() {\r\n        //Drawing static island image\r\n        ctx.drawImage(island, 0, 0, island.width, island.height);\r\n\r\n        //Drawing palms as the level's bounds\r\n        for(var i = 0; i < curr_game.palms.length; i++) {\r\n          ctx.drawImage(palm, curr_game.palms[i].x * box, curr_game.palms[i].y * box);\r\n        }\r\n\r\n        //Drawing X spots\r\n        for(var j = 0; j < curr_game.spots.length; j++) {\r\n          ctx.drawImage(spot, curr_game.spots[j].x * box, curr_game.spots[j].y * box);\r\n        }\r\n        //Drawing chests\r\n        for(var k = 0; k < curr_game.chests.length; k++) {\r\n          ctx.drawImage(chest, curr_game.chests[k].x * box, curr_game.chests[k].y * box);\r\n        }\r\n\r\n        for(let i = 0; i < curr_game.chests.length; i++) {\r\n          for(let j = 0; j < curr_game.spots.length; j++) {\r\n            if(curr_game.chests[i].x === curr_game.spots[j].x && curr_game.chests[i].y === curr_game.spots[j].y){\r\n              ctx.drawImage(dig, curr_game.spots[j].x * box, curr_game.spots[j].y * box);\r\n            }\r\n          }\r\n        }\r\n\r\n        //Drawing pirate character, slicing from sprite\r\n        ctx.drawImage(pirate, 0, 0, 32, 32, curr_game.pirate.x * box, curr_game.pirate.y * box, 32, 32);\r\n\r\n        requestAnimationFrame(curr_game.draw);\r\n      },\r\n\r\n      lvldone : function(){\r\n        let dig = true;\r\n        for(let i = 0; i < curr_game.chests.length; i++) {\r\n          let digg = false;\r\n          for(let j = 0; j < curr_game.spots.length; j++) {\r\n            if(curr_game.chests[i].x === curr_game.spots[j].x && curr_game.chests[i].y === curr_game.spots[j].y){\r\n              digg = true;\r\n            }\r\n          }\r\n          dig = dig && digg;\r\n        }\r\n        if(dig){\r\n          //ctx.drawImage(island, 0, 0, island.width, island.height);\r\n          canvas.style.display = \"none\";\r\n          document.getElementById(\"won\").style.visibility = \"visible\";\r\n        }\r\n      },\r\n\r\n      moving : function() {\r\n\r\n      //A helper function to determine if something is in the way\r\n      function collision(arr1, arr2, offsetx, offsety) {\r\n          for(let i = 0; i < arr2.length; i++){\r\n                if(arr1.x + offsetx === arr2[i].x && arr1.y + offsety === arr2[i].y){\r\n                    return { val : true, p : i}\r\n                }\r\n            }\r\n            return { val : false, p : null}\r\n      }\r\n\r\n      function moveLeft() {\r\n          cc = collision(curr_game.pirate, curr_game.chests, -1, 0);\r\n\r\n          if(collision(curr_game.pirate, curr_game.palms, -1, 0).val === false) {\r\n            if(collision(curr_game.pirate, curr_game.chests, -1, 0).val === true) {\r\n              if(collision(curr_game.chests[cc.p], curr_game.palms, -1, 0).val === false) {\r\n                if(collision(curr_game.chests[cc.p], curr_game.chests, -1, 0).val === false) {\r\n\r\n            curr_game.chests[cc.p].x--;\r\n            curr_game.pirate.x--;\r\n            curr_game.draw();\r\n            }\r\n          }\r\n        } else {\r\n            curr_game.pirate.x--;\r\n            curr_game.draw();\r\n          }\r\n      }\r\n    }\r\n\r\n      function moveRight() {\r\n          cc = collision(curr_game.pirate, curr_game.chests, 1, 0);\r\n\r\n          if(collision(curr_game.pirate, curr_game.palms, 1, 0).val === false) {\r\n            if(collision(curr_game.pirate, curr_game.chests, 1, 0).val === true) {\r\n              if(collision(curr_game.chests[cc.p], curr_game.palms, 1, 0).val === false) {\r\n                if(collision(curr_game.chests[cc.p], curr_game.chests, 1, 0).val === false) {\r\n\r\n            curr_game.pirate.x++;\r\n            curr_game.chests[cc.p].x++;\r\n            curr_game.draw();\r\n            }\r\n          }\r\n        } else {\r\n            curr_game.pirate.x++;\r\n            curr_game.draw();\r\n          }\r\n      }\r\n    }\r\n\r\n      function moveUp() {\r\n          cc = collision(curr_game.pirate, curr_game.chests, 0, -1);\r\n\r\n          if(collision(curr_game.pirate, curr_game.palms, 0, -1).val === false) {\r\n            if(collision(curr_game.pirate, curr_game.chests, 0, -1).val === true) {\r\n                  if(collision(curr_game.chests[cc.p], curr_game.palms, 0, -1).val === false) {\r\n                    if(collision(curr_game.chests[cc.p], curr_game.chests, 0, -1).val === false) {\r\n                      curr_game.pirate.y--;\r\n                      curr_game.chests[cc.p].y--;\r\n                      curr_game.draw();\r\n                      }\r\n                    }\r\n          } else {\r\n            curr_game.pirate.y--;\r\n            curr_game.draw();\r\n          }\r\n      }\r\n    }\r\n\r\n      function moveDown() {\r\n        cc = collision(curr_game.pirate, curr_game.chests, 0, 1);\r\n\r\n        if(collision(curr_game.pirate, curr_game.palms, 0, 1).val === false) {\r\n          if(collision(curr_game.pirate, curr_game.chests, 0, 1).val === true) {\r\n                if(collision(curr_game.chests[cc.p], curr_game.palms, 0, 1).val === false) {\r\n                  if(collision(curr_game.chests[cc.p], curr_game.chests, 0, 1).val === false) {\r\n\r\n            curr_game.chests[cc.p].y++;\r\n            curr_game.pirate.y++;\r\n            curr_game.draw();\r\n            }\r\n          }\r\n        } else {\r\n            curr_game.pirate.y++;\r\n            curr_game.draw();\r\n          }\r\n      }\r\n    }\r\n\r\n      document.addEventListener('keydown', function(event) {\r\n        if(event.keyCode >= 37 && event.keyCode <= 40) {\r\n            event.preventDefault();\r\n\r\n            if(event.keyCode === 37) {\r\n              moveLeft();\r\n            } else if (event.keyCode === 38) {\r\n              moveUp();\r\n            } else if (event.keyCode === 39) {\r\n              moveRight();\r\n            } else if (event.keyCode === 40) {\r\n              moveDown();\r\n            }\r\n\r\n        }\r\n\r\n        curr_game.lvldone();\r\n      });\r\n\r\n    } // end of moving obj\r\n\r\n  } //end of let curr_game\r\n\r\n  curr_game.draw();\r\n  curr_game.moving();\r\n\r\n\r\n\r\n} //end of GAME\r\n\r\n\r\nGAME(level);\r\n\r\n})(); //The very END\r\n"]}